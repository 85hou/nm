+function(e){"use strict";var t="ontouchstart"in document?"touchstart":"click";var r={queue:[],current:null,bomb:0,debug:false};var n=function(e){if(r.debug)console.log(e);return};var a=function(e){if(!isFinite(e)||0>e){e="--:--"}else{var t=Math.floor(e/60);e=Math.floor(e)%60;e=(10>t?"0"+t:t)+":"+(10>e?"0"+e:e)}return e};var l=function(){var l=this;this.options={selector:"#nm_jplayer"};this.player=this.options.selector;l._init();e(l.player).bind(e.jPlayer.event.play,function(){var t=playlist[r.current][r.bomb];e(".nms-play-btn").removeClass("nm-pause").addClass("nm-play");e(".nms-list-item").removeClass("is-active");e("#nm-list-"+r.current+" .nms-list-item").data("status","ready");e("#nm-player-"+r.current+" .nmplayer-title").html(t.title+" - "+t.artist);e("#nm-player-"+r.current+" .duration").html(a(t.duration));e("#nm-player-"+r.current+" .nms-play-btn").removeClass("nm-play").addClass("nm-pause");if(e("#nm-list-"+r.current).length>0){e("#nm-list-"+r.current+" .nms-list-item").eq(r.bomb).addClass("is-active");e("#nm-list-"+r.current+" .nms-list-item").eq(r.bomb).data("status","play")}});e(l.player).bind(e.jPlayer.event.pause,function(){var t=playlist[r.current][r.bomb];e("#nm-player-"+r.current+" .nms-play-btn").removeClass("nm-pause").addClass("nm-play");e("#nm-list-"+r.current+" .nms-list-item").eq(r.bomb).data("status","pause")});e(l.player).bind(e.jPlayer.event.ended,function(){if(r.bomb<playlist[r.current].length){r.bomb=r.bomb+1;l.play(r.current,r.bomb);e(l.player).jPlayer("play")}else{r.bomb=0}});e(document).on(t,".nm-mute",function(){var t=e(".nm-mute");var r=t.data("status");if(r=="mute"){e(l.player).jPlayer("unmute");t.data("status","unmute");t.removeClass("muted");n("unmute mod")}else{t.data("status","mute");e(l.player).jPlayer("mute");t.addClass("muted");n("mute mod")}});e(document).on(t,".nm-previous",function(){var t=e(this);var a=t.parent().data("index");n("previous");if(a!=r.current)return;if(playlist[r.current]<2)return;n("previous");l.previous()});e(document).on(t,".nm-next",function(){var t=e(this);var a=t.parent().data("index");n("next");if(a!=r.current)return;n("next");l.next()});e(document).on(t,".nms-play-btn",function(){var t=e(this);var a=t.data("index");if(r.current==a){if(t.hasClass("nm-play")){n("player continue.");l.play()}else{n("player pause.");l.pause()}}else{n("player play.");r.current=a;l.play(r.current,0)}});e(".nmsingle-process").on("click",function(t){t.preventDefault();var n=e(this),a=n.data("index");if(a!==r.current)return;var s=n.offset().left;var u=(t.pageX-s)/n.width();var i=playlist[r.current][r.bomb].duration;e(l.player).jPlayer("play",i*u)});e(document).on("click",".nms-list-item",function(){var t=e(this);var a=t.parent().data("index");var l=t.index();if(a==r.current&&l==r.bomb)return n("current song selected");r.current=a;r.bomb=l;e("#nm_jplayer").jPlayer("setMedia",playlist[r.current][r.bomb]);e("#nm_jplayer").jPlayer("play")})};l.prototype={_init:function(){e(this.player).jPlayer({timeupdate:function(t){var n,n=t.jPlayer.status.currentTime,n=a(n),l=playlist[r.current][r.bomb].lrc,s=parseInt(t.jPlayer.status.currentTime);l[s]!=undefined&&e("#nm-player-"+r.current+" .nmplayer-lrc").html(l[s]);e("#nm-player-"+r.current+" .current-time").text(n);e("#nm-player-"+r.current+" .nmsingle-process-bar").css("transform","translateX("+(t.jPlayer.status.currentPercentAbsolute-100)+"%)")}})},play:function(t,r){if(typeof t!="undefined"&&typeof r!="undefined")this.select(t,r);e(this.player).jPlayer("play")},pause:function(){e(this.player).jPlayer("pause")},next:function(){var e=playlist[r.current].length;if(r.bomb==e-1)return;this.play(r.current,r.bomb+1)},previous:function(){if(r.bomb<1)return;n(r.bomb);this.play(r.current,r.bomb-1)},select:function(t,n){r.current=t;r.bomb=n;e(this.player).jPlayer("setMedia",playlist[r.current][r.bomb])}};var s=new l}(jQuery);