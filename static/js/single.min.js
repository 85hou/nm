+function(t){"use strict";var e="ontouchstart"in document?"touchstart":"click",n={queue:[],current:null,bomb:0,debug:!1},a=function(t){n.debug&&console.log(t)},s=function(t){if(!isFinite(t)||0>t)t="--:--";else{var e=Math.floor(t/60);t=Math.floor(t)%60,t=(10>e?"0"+e:e)+":"+(10>t?"0"+t:t)}return t},r=function(){var r=this;this.options={selector:"#nm_jplayer"},this.player=this.options.selector,r._init(),t(r.player).bind(t.jPlayer.event.play,function(){var e=playlist[n.current][n.bomb];t(".nms-play-btn").removeClass("nm-pause").addClass("nm-play"),t(".nms-list-item").removeClass("is-active"),t("#nm-list-"+n.current+" .nms-list-item").data("status","ready"),t("#nm-player-"+n.current+" .nmplayer-title").html(e.title+" - "+e.artist),t("#nm-player-"+n.current+" .duration").html(s(e.duration)),t("#nm-player-"+n.current+" .nms-play-btn").removeClass("nm-play").addClass("nm-pause"),t("#nm-list-"+n.current).length>0&&(t("#nm-list-"+n.current+" .nms-list-item").eq(n.bomb).addClass("is-active"),t("#nm-list-"+n.current+" .nms-list-item").eq(n.bomb).data("status","play"))}),t(r.player).bind(t.jPlayer.event.pause,function(){playlist[n.current][n.bomb];t("#nm-player-"+n.current+" .nms-play-btn").removeClass("nm-pause").addClass("nm-play"),t("#nm-list-"+n.current+" .nms-list-item").eq(n.bomb).data("status","pause"),a(n.bomb),a("sb")}),t(r.player).bind(t.jPlayer.event.ended,function(){n.bomb<playlist[n.current].length-1?(n.bomb=n.bomb+1,r.play(n.current,n.bomb),t(r.player).jPlayer("play"),a("continue")):(n.bomb=0,a("end success"))}),t(document).on(e,".com-close",function(){var e=t(this);e.parent().remove()}),t(document).on(e,".nm-mute",function(){var e=t(".nm-mute"),n=e.data("status");"mute"==n?(t(r.player).jPlayer("unmute"),e.data("status","unmute"),e.removeClass("muted"),a("unmute mod")):(e.data("status","mute"),t(r.player).jPlayer("mute"),e.addClass("muted"),a("mute mod"))}),t(document).on(e,".nm-previous",function(){var e=t(this),s=e.parent().data("index");a("previous"),s==n.current&&(playlist[n.current]<2||(a("previous"),r.previous()))}),t(document).on(e,".nm-next",function(){var e=t(this),s=e.parent().data("index");a("next"),s==n.current&&(a("next"),r.next())}),t(document).on(e,".nms-play-btn",function(){var e=t(this),s=e.data("index");n.current==s?e.hasClass("nm-play")?(a("player continue."),r.play()):(a("player pause."),r.pause()):(a("player play."),n.current=s,r.play(n.current,0))}),t(".nmsingle-process").on("click",function(e){e.preventDefault();var a=t(this),s=a.data("index");if(s===n.current){var l=a.offset().left,i=(e.pageX-l)/a.width(),o=playlist[n.current][n.bomb].duration;t(r.player).jPlayer("play",o*i)}}),t(document).on("click",".nms-list-item",function(){var e=t(this),s=e.parent().data("index"),r=e.index();return s==n.current&&r==n.bomb?a("current song selected"):(n.current=s,n.bomb=r,t("#nm_jplayer").jPlayer("setMedia",playlist[n.current][n.bomb]),void t("#nm_jplayer").jPlayer("play"))})};r.prototype={_init:function(){t(this.player).jPlayer({timeupdate:function(e){var a,a=e.jPlayer.status.currentTime,a=s(a),r=playlist[n.current][n.bomb].lrc,l=parseInt(e.jPlayer.status.currentTime);void 0!=r[l]&&t("#nm-player-"+n.current+" .nmsingle-lrc").html(r[l]),t("#nm-player-"+n.current+" .current-time").text(a),t("#nm-player-"+n.current+" .nmsingle-process-bar").css("transform","translateX("+(e.jPlayer.status.currentPercentAbsolute-100)+"%)")},supplied:"mp3",swfPath:nm_ajax_url.swfurl,solution:"html,flash",volume:1})},play:function(e,n){"undefined"!=typeof e&&"undefined"!=typeof n&&this.select(e,n),t(this.player).jPlayer("play")},pause:function(){t(this.player).jPlayer("pause")},next:function(){var t=playlist[n.current].length;n.bomb!=t-1&&this.play(n.current,n.bomb+1)},previous:function(){n.bomb<1||(a(n.bomb),this.play(n.current,n.bomb-1))},select:function(e,a){n.current=e,n.bomb=a,t(this.player).jPlayer("setMedia",playlist[n.current][n.bomb])}};new r}(jQuery);