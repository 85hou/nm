+function(t){"use strict";var e="ontouchstart"in document?"touchstart":"click",s={queue:[],current:null,bomb:0,debug:!1},i=function(t){s.debug&&console.log(t)},a=function(t){if(!isFinite(t)||0>t)t="--:--";else{var e=Math.floor(t/60);t=Math.floor(t)%60,t=(10>e?"0"+e:e)+":"+(10>t?"0"+t:t)}return t},n=function(){var n=this;this.options={selector:"#nm_jplayer"},this.player=this.options.selector,n._init(),t(n.player).bind(t.jPlayer.event.play,function(){var e=playlist[s.current][s.bomb];t(".nms-play-btn").removeClass("nm-pause").addClass("nm-play"),t(".nms-list-item").removeClass("is-active"),t("#nm-list-"+s.current+" .nms-list-item").data("status","ready"),t("#nm-player-"+s.current+" .nmplayer-title").html(e.title+" - "+e.artist),t("#nm-player-"+s.current+" .duration").html(a(e.duration)),t("#nm-player-"+s.current+" .nms-play-btn").removeClass("nm-play").addClass("nm-pause"),t("#nm-list-"+s.current).length>0&&(t("#nm-list-"+s.current+" .nms-list-item").eq(s.bomb).addClass("is-active"),t("#nm-list-"+s.current+" .nms-list-item").eq(s.bomb).data("status","play"))}),t(n.player).bind(t.jPlayer.event.pause,function(){playlist[s.current][s.bomb];t("#nm-player-"+s.current+" .nms-play-btn").removeClass("nm-pause").addClass("nm-play"),t("#nm-list-"+s.current+" .nms-list-item").eq(s.bomb).data("status","pause"),i(s.bomb),i("sb")}),t(n.player).bind(t.jPlayer.event.ended,function(){s.bomb<playlist[s.current].length-1?(s.bomb=s.bomb+1,n.play(s.current,s.bomb),t(n.player).jPlayer("play"),i("continue")):(s.bomb=0,i("end success"))}),t(document).on(e,".com-close",function(){var e=t(this);e.parent().remove()}),t(document).on(e,".nm-mute",function(){var e=t(".nm-mute"),s=e.data("status");"mute"==s?(t(n.player).jPlayer("unmute"),e.data("status","unmute"),e.removeClass("muted"),i("unmute mod")):(e.data("status","mute"),t(n.player).jPlayer("mute"),e.addClass("muted"),i("mute mod"))}),t(document).on(e,".nm-previous",function(){var e=t(this),a=e.parent().data("index");i("previous"),a==s.current&&(playlist[s.current]<2||(i("previous"),n.previous()))}),t(document).on(e,".nm-next",function(){var e=t(this),a=e.parent().data("index");i("next"),a==s.current&&(i("next"),n.next())}),t(document).on(e,".nms-play-btn",function(){var e=t(this),a=e.data("index");s.current==a?e.hasClass("nm-play")?(i("player continue."),n.play()):(i("player pause."),n.pause()):(i("player play."),s.current=a,n.play(s.current,0))}),t(".nmsingle-process").on("click",function(e){e.preventDefault();var i=t(this),a=i.data("index");if(a===s.current){var o=i.offset().left,r=(e.pageX-o)/i.width(),l=playlist[s.current][s.bomb].duration;t(n.player).jPlayer("play",l*r)}}),t(document).on("click",".nms-list-item",function(){var e=t(this),a=e.parent().data("index"),n=e.index();return a==s.current&&n==s.bomb?i("current song selected"):(s.current=a,s.bomb=n,t("#nm_jplayer").jPlayer("setMedia",playlist[s.current][s.bomb]),void t("#nm_jplayer").jPlayer("play"))})};n.prototype={_init:function(){t(this.player).jPlayer({timeupdate:function(e){var i,i=e.jPlayer.status.currentTime,i=a(i),n=playlist[s.current][s.bomb].lrc,o=parseInt(e.jPlayer.status.currentTime);void 0!=n[o]&&t("#nm-player-"+s.current+" .nmsingle-lrc").html(n[o]),t("#nm-player-"+s.current+" .current-time").text(i),t("#nm-player-"+s.current+" .nmsingle-process-bar").css("transform","translateX("+(e.jPlayer.status.currentPercentAbsolute-100)+"%)")},supplied:"mp3",swfPath:nm_ajax_url.swfurl,solution:"html,flash",volume:1})},play:function(e,s){"undefined"!=typeof e&&"undefined"!=typeof s&&this.select(e,s),t(this.player).jPlayer("play")},pause:function(){t(this.player).jPlayer("pause")},next:function(){var t=playlist[s.current].length;s.bomb!=t-1&&this.play(s.current,s.bomb+1)},previous:function(){s.bomb<1||(i(s.bomb),this.play(s.current,s.bomb-1))},select:function(e,i){s.current=e,s.bomb=i,t(this.player).jPlayer("setMedia",playlist[s.current][s.bomb])}};new n}(jQuery);