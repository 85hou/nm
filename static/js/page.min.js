+function(a){var s=a(".nmplayer-lrc"),t=a(".nmplayer-time"),e=a(".nmplayer-prosess"),n=a(".nmplaybar"),i=a("#nmplayer-button"),r=a(".nmplayer-title"),o=a("#nm-wrapper"),u=a(".nmplayer-cover"),c=function(a){if(!isFinite(a)||0>a)a="--:--";else{var s=Math.floor(a/60);a=Math.floor(a)%60;a=(10>s?"0"+s:s)+":"+(10>a?"0"+a:a)}return a},m=new jPlayerPlaylist({jPlayer:"#nm_jplayer",cssSelectorAncestor:"#nm_container"},[],{playlistOptions:{autoPlay:true},timeupdate:function(a){var e;e=a.jPlayer.status.currentTime;e=c(e);var n=m.current,i=m.playlist;lrc=i[n].lrc;l=parseInt(a.jPlayer.status.currentTime);lrc[l]!=undefined&&s.html(lrc[l]);t.text(e)},supplied:"mp3",swfPath:nm_ajax_url.swfPath,smoothPlayBar:true,keyEnabled:true,audioFullScreen:true});a(document).on("click",".nm-list-item",function(){var s=a(this),t=s.data("cover"),e=s.data("info"),l=s.data("id"),i=a(".nm-songs"),r=a(".album--nice"),o=nm_ajax_url.tworow?" threerow":"",p='<div class="nm-songs"><div class="nm-songs-title nm-container">'+e+'</div><div class="nm-songs-list nm-container"><ul class="nm-songlist'+o+'"></ul></div></div>';u.css("background-image","url("+t+")");n.addClass("appear");if(s.hasClass("is-active")){if(s.hasClass("paused")){m.play()}else{m.pause()}}else{i.remove();s.parent().after(p);r.removeClass("is-active");s.addClass("is-active");a.ajax({type:"post",dataType:"json",url:nm_ajax_url.ajax_url,data:{action:"nmjson",id:l},success:function(s){if(200==s.msg){var t="";s=s.song;songs=s.songs;a.each(songs,function(a,s){t+='<li class="nm-songlist-item">'+s.title+" - "+s.artist+'<span class="song-time">'+c(s.duration)+"</span></li>"});a(".nm-songlist").html(t);m.setPlaylist(songs)}}})}});a(document).on(a.jPlayer.event.play,function(){var t=a(".nm-songlist-item"),e=t.eq(m.current);t.removeClass("nmplaylist-current");i.removeClass("paused");t.data("status","ready");e.data("status","play");e.addClass("nmplaylist-current");s.empty();a(".nm-list-item.is-active").removeClass("paused");r.html(m.playlist[m.current].title+" - "+m.playlist[m.current].artist)});a(document).on(a.jPlayer.event.pause,function(){i.addClass("paused");a(".nm-list-item.is-active").addClass("paused")});a(document).on("click","#nmplayer-button",function(){var s=a(this);if(s.hasClass("paused")){m.play()}else{m.pause()}});a(document).on("click",".nm-songlist-item",function(){var s=a(this),t=s.index(),e=s.data("status");if(e=="play"){s.data("status","pause");m.pasue()}else{if(m.current==t){m.play()}else{m.play(t)}s.data("status","play")}});a(document).on("click",".nm-loadmore",function(){var s=a(this),t=s.data();a(".music-page-navi").remove();a.ajax({url:nm_ajax_url.ajax_url,type:"POST",data:t,dataType:"json",success:function(a){if(a.status==200){o.append(a.data);if(a.nav){o.after(a.nav)}}}})})}(jQuery);