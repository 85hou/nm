+function(t){var a=t(".nmplayer-lrc"),e=t(".nmplayer-time"),n=(t(".nmplayer-prosess"),t(".nmplaybar")),s=t("#nmplayer-button"),r=t(".nmplayer-title"),i=t("#nm-wrapper"),u=t(".nmplayer-cover"),o=function(t){if(!isFinite(t)||0>t)t="--:--";else{var a=Math.floor(t/60);t=Math.floor(t)%60,t=(10>a?"0"+a:a)+":"+(10>t?"0"+t:t)}return t},m=new jPlayerPlaylist({jPlayer:"#nm_jplayer",cssSelectorAncestor:"#nm_container"},[],{playlistOptions:{autoPlay:!0},timeupdate:function(t){var n;n=t.jPlayer.status.currentTime,n=o(n);var s=m.current,r=m.playlist;lrc=r[s].lrc,l=parseInt(t.jPlayer.status.currentTime),void 0!=lrc[l]&&a.html(lrc[l]),e.text(n)},supplied:"mp3",swfPath:nm_ajax_url.swfPath,smoothPlayBar:!0,keyEnabled:!0,audioFullScreen:!0});t(document).on("click",".nm-list-item",function(){var a=t(this),e=a.data("cover"),s=a.data("info"),r=a.data("id"),l=t(".nm-songs"),i=t(".album--nice"),c=nm_ajax_url.tworow?" threerow":"",p='<div class="nm-songs"><div class="nm-songs-title nm-container">'+s+'</div><div class="nm-songs-list nm-container"><ul class="nm-songlist'+c+'"></ul></div></div>';u.css("background-image","url("+e+")"),n.addClass("appear"),a.hasClass("is-active")?a.hasClass("paused")?m.play():m.pause():(l.remove(),a.parent().after(p),i.removeClass("is-active"),a.addClass("is-active"),t.ajax({type:"post",dataType:"json",url:nm_ajax_url.ajax_url,data:{action:"nmjson",id:r},success:function(a){if(200==a.msg){var e="";a=a.song,songs=a.songs,t.each(songs,function(t,a){e+='<li class="nm-songlist-item"><span class="song-info">'+a.title+" - "+a.artist+'</span><span class="song-time">'+o(a.duration)+"</span></li>"}),t(".nm-songlist").html(e),m.setPlaylist(songs)}}}))}),t(document).on(t.jPlayer.event.play,function(){var e=t(".nm-songlist-item"),n=e.eq(m.current);e.removeClass("nmplaylist-current"),s.removeClass("paused"),e.data("status","ready"),n.data("status","play"),n.addClass("nmplaylist-current"),a.empty(),t(".nm-list-item.is-active").removeClass("paused"),r.html(m.playlist[m.current].title+" - "+m.playlist[m.current].artist)}),t(document).on(t.jPlayer.event.pause,function(){s.addClass("paused"),t(".nm-list-item.is-active").addClass("paused")}),t(document).on("click","#nmplayer-button",function(){var a=t(this);a.hasClass("paused")?m.play():m.pause()}),t(document).on("click",".nm-songlist-item",function(){var a=t(this),e=a.index(),n=a.data("status");"play"==n?(a.data("status","pause"),m.pasue()):(m.current==e?m.play():m.play(e),a.data("status","play"))}),t(document).on("click",".nm-loadmore",function(){var a=t(this),e=a.data();t(".music-page-navi").remove(),t.ajax({url:nm_ajax_url.ajax_url,type:"POST",data:e,dataType:"json",success:function(t){200==t.status&&(i.append(t.data),t.nav&&i.after(t.nav))}})})}(jQuery);