+function(t){"use strict";var e={queue:[],current:null,bomb:0,debug:!0},s=[],i=function(t){e.debug&&console.log(t)},a=function(t){if(!isFinite(t)||0>t)t="--:--";else{var e=Math.floor(t/60);t=Math.floor(t)%60,t=(10>e?"0"+e:e)+":"+(10>t?"0"+t:t)}return t},n=function(){var n=this;this.options={selector:"#nm_jplayer"},this.player=this.options.selector,n.init(),t(document).on("click",".nm-list-item",function(){var o=t(this),r=o.data("info"),l=o.data("id"),h="dick"+l,u=t(".nm-songs"),c=nm_ajax_url.tworow?" threerow":"";t(".nmplaybar").addClass("appear");var d='<div class="nm-songs"><div class="nm-songs-title nm-container">'+r+'</div><div class="nm-songs-list nm-container"><ul class="nm-songlist'+c+'"></ul></div></div>';u.remove(),o.parent().after(d),e.current=h,s[h]?n.play(h,0):t.ajax({type:"post",dataType:"json",url:nm_ajax_url.ajax_url,data:{action:"nmjson",id:l},success:function(e){if(200==e.msg){var i="";e=e.song;var o=e.songs;t.each(o,function(t,e){i+='<li class="nm-songlist-item"><span class="song-info">'+e.title+" - "+e.artist+'</span><span class="song-time">'+a(e.duration)+"</span></li>"}),t(".nm-songlist").html(i),s["dick"+l]=o,n.play(h,0)}}}),i(e.current)}),t(n.player).bind(t.jPlayer.event.ended,function(){e.bomb<s[e.current].length?(e.bomb=e.bomb+1,n.play(e.current,e.bomb),t(n.player).jPlayer("play")):e.bomb=0}),t(document).on("click",".nm-songlist-item",function(){var s=t(this),a=s.index();n.play(e.current,a),i("play "+a)}),t(".jp-progress").on("click",function(i){i.preventDefault();var a=t(this),o=a.offset().left,r=(i.pageX-o)/a.width(),l=s[e.current][e.bomb].duration;t(n.player).jPlayer("play",l*r)}),t(document).on("click",".nm-previous",function(){t(this);i("previous"),n.previous()}),t(document).on("click",".nm-next",function(){t(this);i("next"),n.next()})};n.prototype={init:function(){t(this.player).jPlayer({timeupdate:function(i){var n,n=i.jPlayer.status.currentTime,n=a(n),o=s[e.current][e.bomb].lrc,r=parseInt(i.jPlayer.status.currentTime);void 0!=o[r]&&t(".nmplayer-lrc").html(o[r]),t(".nmplayer-time").text(n),t(".nmplayer-prosess").css("transform","translateX("+(i.jPlayer.status.currentPercentAbsolute-100)+"%)")},supplied:"mp3",swfPath:nm_ajax_url.swfurl,solution:"html,flash",volume:1})},getJSON:function(e){t.ajax({type:"post",dataType:"json",url:nm_ajax_url.ajax_url,data:{action:"nmjson",id:e},success:function(t){if(200==t.msg){t=t.song;var i=t.songs;return s["dick"+e]=i,i}}})},play:function(e,s){"undefined"!=typeof e&&"undefined"!=typeof s&&this.select(e,s),t(this.player).jPlayer("play")},select:function(i,a){e.current=i,e.bomb=a,t(this.player).jPlayer("setMedia",s[e.current][e.bomb])},pause:function(){t(this.player).jPlayer("pause")},next:function(){var t=s[e.current].length;e.bomb!=t-1&&this.play(e.current,e.bomb+1)},previous:function(){e.bomb<1||(i(e.bomb),this.play(e.current,__NM.bomb-1))}};new n}(jQuery);