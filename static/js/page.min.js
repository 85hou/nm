+function(t){var e=t(".nmplayer-lrc"),a=t(".nmplayer-time"),n=(t(".nmplayer-prosess"),t(".nmplaybar")),s=t("#nmplayer-button"),r=t(".nmplayer-title"),i=t("#nm-wrapper"),u=t(".nmplayer-cover"),o=function(t){if(!isFinite(t)||0>t)t="--:--";else{var e=Math.floor(t/60);t=Math.floor(t)%60,t=(10>e?"0"+e:e)+":"+(10>t?"0"+t:t)}return t},m=new jPlayerPlaylist({jPlayer:"#nm_jplayer",cssSelectorAncestor:"#nm_container"},[],{playlistOptions:{autoPlay:!0},timeupdate:function(t){var n;n=t.jPlayer.status.currentTime,n=o(n);var s=m.current,r=m.playlist;lrc=r[s].lrc,l=parseInt(t.jPlayer.status.currentTime),void 0!=lrc[l]&&e.html(lrc[l]),a.text(n)},supplied:"mp3",swfPath:nm_ajax_url.swfPath,smoothPlayBar:!0,keyEnabled:!0,audioFullScreen:!0});t(document).on("click",".nm-list-item",function(){var e=t(this),a=e.data("cover"),s=e.data("info"),r=e.data("id"),l=t(".nm-songs"),i=t(".album--nice"),c=nm_ajax_url.tworow?" threerow":"",p='<div class="nm-songs"><div class="nm-songs-title nm-container">'+s+'</div><div class="nm-songs-list nm-container"><ul class="nm-songlist'+c+'"></ul></div></div>';u.css("background-image","url("+a+")"),n.addClass("appear"),e.hasClass("is-active")?e.hasClass("paused")?m.play():m.pause():(l.remove(),e.parent().after(p),i.removeClass("is-active"),e.addClass("is-active"),t.ajax({type:"post",dataType:"json",url:nm_ajax_url.ajax_url,data:{action:"nmjson",id:r},success:function(e){if(200==e.msg){var a="";e=e.song,songs=e.songs,t.each(songs,function(t,e){a+='<li class="nm-songlist-item"><span class="song-info">'+e.title+" - "+e.artist+'</span><span class="song-time">'+o(e.duration)+"</span></li>"}),t(".nm-songlist").html(a),m.setPlaylist(songs)}}}))}),t(document).on(t.jPlayer.event.play,function(){var a=t(".nm-songlist-item"),n=a.eq(m.current);a.removeClass("nmplaylist-current"),s.removeClass("paused"),a.data("status","ready"),n.data("status","play"),n.addClass("nmplaylist-current"),e.empty(),t(".nm-list-item.is-active").removeClass("paused"),r.html(m.playlist[m.current].title+" - "+m.playlist[m.current].artist)}),t(document).on(t.jPlayer.event.pause,function(){s.addClass("paused"),t(".nm-list-item.is-active").addClass("paused")}),t(document).on("click","#nmplayer-button",function(){var e=t(this);e.hasClass("paused")?m.play():m.pause()}),t(document).on("click",".nm-songlist-item",function(){var e=t(this),a=e.index(),n=e.data("status");"play"==n?(e.data("status","pause"),m.pasue()):(m.current==a?m.play():m.play(a),e.data("status","play"))}),t(document).on("click",".nm-loadmore",function(){var e=t(this),a=e.data();t(".music-page-navi").remove(),t.ajax({url:nm_ajax_url.ajax_url,type:"POST",data:a,dataType:"json",success:function(t){200==t.status&&(i.append(t.data),t.nav&&i.after(t.nav))}})})}(jQuery);